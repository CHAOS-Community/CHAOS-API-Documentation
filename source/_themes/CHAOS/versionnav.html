<script type="text/javascript">
var versions = {{theme_versions}};
var pagename = '{{pagename}}';
var stable = 'v{{theme_stable}}';

// Change URL on version change
function vfnav() {
    var pn = pagename;
    if ( pagename=='index' ) {
        pn = '';
    }

    var v = $(this).children("option:selected").attr('value');

    var uri = '/' + v + '/' + pn;
    if ( (v==0) || (v==stable) ) {
        uri = '/manual/' + pn;
    }
    window.location.href = uri;
}

$(document).ready(function() {
    // Populate version <select>
    $("#vn").html(function() {
        var s = $("<select/>");
        var o = '<option/>';

        $.each(versions, function(index, version) {
            // Create an <option> for each version
            $(o, {value: version.name, text: version.name}).appendTo(s);
        });

        return(s);
    });

    // Setup URL change on version <select>
    $("#vn select").bind('change', vfnav);
    $('#vn select').val('v{{version|e}}');
});
</script>
