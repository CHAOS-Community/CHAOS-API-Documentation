Destination
===========

.. module:: MCM
   :noindex:

   .. extension:: Destination

      Destinations are information about the file hosts which host the media in
      the CHAOS database. Each destination corresponds to a host with a
      particular URL-pattern.

      Destinations have a ``StringFormat`` which describes how the URLs to the
      media (on the particular host) should be formed.

      ``StringFormat`` is a string in which the following tokens can be used:

      * :code:`{BASE_PATH}` will be replaced by the Destination's ``BasePath``
      * :code:`{FOLDER_PATH}` will be replaced by the File's ``FolderPath``
      * :code:`{FILENAME}` will be replaced by the File's ``FolderPath``
      * :code:`{SESSION_GUID}` will be replaced current session GUID
      * :code:`{OBJECT_GUID}` will be replaced by the Objects's ``GUID``

      each token will be replaced with the corresponding value according to the
      file, its destination and so on. None of the tokens are required and can
      be omitted. If ``{SESSION_GUID}`` is present in the string but no session
      guid is available to CHAOS (e.g. if no user is logged in) it will be
      replaced with ``{SESSION_GUID_MISSING}``. The other tokens work the same
      way.

      The ``URL`` field of every ``File`` belonging to the ``Destination`` will be
      generated by the ``StringFormat`` of the ``Destination``.

      Destinations have a ``BasePath`` field, which typically is the first part
      of the URL for files hosted on the particular destination. The token
      ``{BASE_PATH}`` will be replaced with value of this field.

      .. action:: Get

         Gets a destination.

         :param id: The id the of the Destination
         :type id: optional
         :returns: A list of destinations
         :rtype: DestinationInfo

         If no ``id`` is given, all destinations will be returned.
